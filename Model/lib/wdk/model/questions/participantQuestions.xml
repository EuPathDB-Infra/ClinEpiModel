<wdkModel>

  <questionSet name="ParticipantQuestions" displayName="Search for participants">

    <!-- ************************************************************ -->
    <!-- Characteristics -->  
    <!-- ************************************************************ -->

   <question name="ParticipantsByAllData" newBuild="1"
              searchCategory="Participant"
              displayName="Select a Set of Participants (no Relative Observations)"
              shortDisplayName="Part Details"
              queryRef="ParticipantId.ParticipantsByCharWiz" 
              recordClassRef="ParticipantRecordClasses.ParticipantRecordClass" >



<!--
        <attributesList 
            summary="EUPATH_0000054,EUPATH_0000002,ave_anoph,ave_para_density,time_of_obs,visit_count,visits_per_year_obs,avg_weight, avg_hemo"        
        /> 
-->
        <attributesList 
            summary="ave_anoph,ave_para_density,time_of_obs,visit_count,visits_per_year_obs,avg_weight, avg_hemo"        
        /> 
	<dynamicAttributes>
	    <columnAttribute name="avg_hemo" displayName="Avg Hemoglobin" help="Average hemoglobin of observations meeting search criteria over the time frame specified" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>     
             <columnAttribute name="avg_weight" displayName="Avg Weight" help="Average weight of observations meeting search criteria over the time frame specified" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>   
             
	     <columnAttribute name="ave_anoph" displayName="Avg Anopheles" help="Average number of anopheles mosquitos collected in this participants dwelling over the time frame specified" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
            <columnAttribute name="ave_para_density" displayName="Geo Mean Parasite Density" help="Average parasite density of participant in observations meeting search criteria" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="visits_per_year_obs" displayName="Matching Observations / Year" align="center" help="Number of observations matching search criteria / year of observation for this participant"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="visit_count" displayName="# matching observations" align="center" help="Number of observations observations matching the search criteria for this participant"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="time_of_obs" displayName="Years of Observation" align="center" help="Number of years this person was observed matching date and age ranges"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="ave_age_visit" displayName="Avg age at observation" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	</dynamicAttributes>
          

        <summary>
            <![CDATA[
Use the filters above to select a set of Participants or to explore the data.  Start on the left, and skip filters that are not of interest.  Once you have selected a set, click the blue button to view or analyze it. 
            ]]>
        </summary>

        <propertyList name="organism">
           <value>H. sapien</value>
        </propertyList>
        <propertyList name="websiteProperties">
          <value>useWizard</value>
          <value>hideOperation</value>
          <value>hideTitle</value>
          <value>hideAttrDescr</value>
        </propertyList>
        <description>
            <![CDATA[
             Find participants based on metadata characteristics. <br />
            ]]>
        </description>
 
    </question>

    <question name="ParticipantsByRelativeVisits" newBuild="1"
              searchCategory="Participant"
              displayName="Select a Set of Participants"
              shortDisplayName="Part by Rel Observations"
              queryRef="ParticipantId.ParticipantsByCharWizRelVis" 
              recordClassRef="ParticipantRecordClasses.ParticipantRecordClass" >



<!--
        <attributesList 
            summary="EUPATH_0000054,ave_anoph,ave_para_density,time_of_obs,visit_count,visits_per_year_obs,avg_weight,avg_hemo"        
        /> 
-->
        <attributesList 
            summary="EUPATH_0000054,timeline_search,visits_per_year_obs,ave_anoph,time_of_obs"        
        /> 


	<dynamicAttributes>
	    <columnAttribute name="avg_hemo" displayName="Avg Hemoglobin" help="Average hemoglobin of observations meeting search criteria over the time frame specified" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>     
             <columnAttribute name="avg_weight" displayName="Avg Weight" help="Average weight of observations meeting search criteria over the time frame specified" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>   
             
	     <columnAttribute name="ave_anoph" displayName="Avg Anopheles" help="Average number of anopheles mosquitos collected in this participants dwelling over the time frame specified" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
            <columnAttribute name="ave_para_density" displayName="Geo Mean Parasite Density" help="Average parasite density of participant in observations meeting search criteria" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="visits_per_year_obs" displayName="Matching Observations / Year" align="center" help="Number of observations matching search criteria / year of observation for this participant"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="visit_count" displayName="# matching observations" align="center" help="Number of observations observations matching the search criteria for this participant"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="time_of_obs" displayName="Years of Observation" align="center" help="Number of years this person was observed matching date and age ranges"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="ave_age_visit" displayName="Avg age at observation" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="xmin" displayName="min date" align="center" internal="true"> 
            </columnAttribute>
	     <columnAttribute name="xmax" displayName="max date" align="center" internal="true"> 
            </columnAttribute>
             <textAttribute name="timeline_search" displayName="Malaria status timeline (search)" help="Timeline based on the date range chosen in this search" sortable="false">
                <text>
                  <![CDATA[
                           <img src="/cgi-bin/dataPlotter.pl?project_id=ClinEpiDB&id=$$source_id$$&type=Participant&fmt=png&template=1&contXAxis=EUPATH_0000091&status=EUPATH_0000338&optStatus=EUPATH_0000097&h=40&w=800&xmin=$$xmin$$&xmax=$$xmax$$&thumb=1"/>
                  ]]>
                </text>
             </textAttribute>

	</dynamicAttributes>
          

        <summary>
            <![CDATA[
Use the filters above to select a set of Participants or to explore the data.  Start on the left, and skip filters that are not of interest.  Once you have selected a set, click the blue button to view or analyze it. 
            ]]>
        </summary>

        <propertyList name="organism">
           <value>H. sapien</value>
        </propertyList>
        <propertyList name="websiteProperties">
          <value>useWizard</value>
          <value>hideOperation</value>
          <value>hideTitle</value>
          <value>hideAttrDescr</value>
        </propertyList>
 
        <propertyList name="relatedObservationsLayoutSettings">
          <value>
            {
              "observationsGroupName": "part_event_characteristics",
              "relatedObservationsGroupName": "relative_events",
              "useRelativeObservationsParamName": "use_relative_visits",
              "dateOperatorParamName": "dateOperator_fv",
              "daysBetweenParamName": "days_between",
              "dateDirectionParamName": "date_direction_fv",
              "numRelativeEventsParamName": "num_relative_events",
              "relativeVisitsParamName": "relative_visits_nf"
            }
          </value>
        </propertyList>

    </question>

   <question name="ParticipantsByDwellingId"   newBuild="1" 
              displayName="Transform to Participants"
              shortDisplayName="dwelling->participant"
              queryRef="ParticipantId.ParticipantsByDwellingIds" 
              recordClassRef="ParticipantRecordClasses.ParticipantRecordClass"
              noSummaryOnSingleRecord="true">


        <attributesList 
            summary="dwelling"   
        /> 

	<dynamicAttributes>
	     <columnAttribute name="dwelling" displayName="Dwelling Transformed" help="Dwelling Participant is associated with" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	</dynamicAttributes>

             <summary>
             Find participant by dwelling id.
             </summary>

             <description>
               <![CDATA[
             Find participant by dwelling id.
               ]]>
             </description>
    </question>

      <question name="ParticipantsByClinicalVisit"   newBuild="22" 
              displayName="Transform to Participants"
              shortDisplayName="clinicalobservations->participant"
              queryRef="ParticipantId.ParticipantsByClinicalVisits" 
              recordClassRef="ParticipantRecordClasses.ParticipantRecordClass"
              noSummaryOnSingleRecord="true">


        <attributesList 
            summary="num_of_visits"   
            sorting="num_of_visits desc"
        /> 


	<dynamicAttributes>
	     <columnAttribute name="num_of_visits" displayName="Clincal Observations Transformed" help="Clinicals observations associated with the participant" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	</dynamicAttributes>

             <summary>
             Find participants by by clinical observations.
             </summary>

             <description>
               <![CDATA[
             Find participants by clinical observations.
               ]]>
             </description>
    </question>

   <question name="ParticipantsBySourceID" newBuild="22"
	     displayName="Participant ID"
	     shortDisplayName="Participant ID"
	     queryRef="ParticipantId.ParticipantsBySourceID" 
             recordClassRef="ParticipantRecordClasses.ParticipantRecordClass"
             noSummaryOnSingleRecord="false">


        <attributesList 
            summary="source_id"   
            sorting="source_id desc"
        /> 
             <summary>
             Find participant by source id.
             </summary>

             <description>
               <![CDATA[
             Find participant by source id.
               ]]>
             </description>
    </question>


  </questionSet>
</wdkModel>
