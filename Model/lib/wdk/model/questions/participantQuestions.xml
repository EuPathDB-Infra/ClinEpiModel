<wdkModel>

  <questionSet name="ParticipantQuestions" displayName="Search for participants">

    <!-- ************************************************************ -->
    <!-- Characteristics -->  
    <!-- ************************************************************ -->

   <question name="ParticipantsByAllData" newBuild="1" includeProjects="NotUsed"
              searchCategory="Participant"
              displayName="Select a Set of Participants (no Relative Observations)"
              shortDisplayName="Part Details"
              queryRef="ParticipantId.ParticipantsByCharWiz" 
              recordClassRef="DS_0ad509829eParticipantRecordClasses.DS_0ad509829eParticipantRecordClass" >


<!--
        <attributesList 
            summary="EUPATH_0000054,EUPATH_0000002,ave_anoph,ave_para_density,time_of_obs,visit_count,visits_per_year_obs,avg_weight, avg_hemo"        
        /> 
-->
	<dynamicAttributes>
	    <columnAttribute name="avg_hemo" displayName="Avg Hemoglobin" help="Average hemoglobin of observations meeting search criteria over the time frame specified" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>     
             <columnAttribute name="avg_weight" displayName="Avg Weight" help="Average weight of observations meeting search criteria over the time frame specified" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>   
             
	     <columnAttribute name="ave_anoph" displayName="Avg Anopheles" help="Average number of anopheles mosquitos collected in this participants household over the time frame specified" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
            <columnAttribute name="ave_para_density" displayName="Geo Mean Parasite Density" help="Average parasite density of participant in observations meeting search criteria" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="visits_per_year_obs" displayName="Matching Observations / Year" align="center" help="Number of observations matching search criteria / year of observation for this participant"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="visit_count" displayName="# matching observations" align="center" help="Number of observations matching the search criteria for this participant"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="time_of_obs" displayName="Years of Observation" align="center" help="Number of years this person was observed matching date and age ranges"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="ave_age_visit" displayName="Avg age at observation" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	</dynamicAttributes>
          

        <summary>
            <![CDATA[
Use the filters above to select a set of Participants or to explore the data.  Start on the left, and skip filters that are not of interest.  Once you have selected a set, click the blue button to view or analyze it. 
            ]]>
        </summary>

        <propertyList name="organism">
           <value>H. sapien</value>
        </propertyList>
        <propertyList name="websiteProperties">
          <value>useWizard</value>
          <value>hideOperation</value>
          <value>hideTitle</value>
          <value>hideAttrDescr</value>
        </propertyList>
        <description>
            <![CDATA[
             Find participants based on metadata characteristics. <br />
            ]]>
        </description>
 
    </question>

    <question name="ParticipantsByRelativeVisits_prism" newBuild="1"
              searchCategory="Participant"
              displayName="Select a Set of Participants (PRISM)"
              shortDisplayName="Particip PRISM"
              queryRef="ParticipantId.ParticipantsByCharWizRelVis_prism" 
              includeProjects="ICEMR"
              recordClassRef="DS_0ad509829eParticipantRecordClasses.DS_0ad509829eParticipantRecordClass" >

        <attributesList 
            summary="EUPATH_0000054,EUPATH_0000120,visits_per_year_obs,time_of_obs,visit_count"        
        /> 
	<dynamicAttributes>
<!--
	    <columnAttribute name="avg_hemo" displayName="Avg Hemoglobin" help="Average hemoglobin of observations meeting search criteria over the time frame specified" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>     
             <columnAttribute name="avg_weight" displayName="Avg Weight" help="Average weight of observations meeting search criteria over the time frame specified" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>   
             
	     <columnAttribute name="ave_anoph" displayName="Avg Anopheles" help="Average number of anopheles mosquitos collected in this participants household over the time frame specified" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
            <columnAttribute name="ave_para_density" displayName="Geo Mean Parasite Density" help="Average parasite density of participant in observations meeting search criteria" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="ave_age_visit" displayName="Avg age at observation" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
-->
	     <columnAttribute name="visits_per_year_obs" displayName="Matching Observations / Year" align="center" help="Number of observations matching search criteria / year of observation for this participant"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="time_of_obs" displayName="Years of Observation" align="center" help="Number of years this person was observed matching date and age ranges"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="visit_count" displayName="# matching observations" align="center" help="Number of observations matching the search criteria for this participant"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	</dynamicAttributes>
          

        <summary>
            <![CDATA[
Use the filters above to select a set of Participants or to explore the data.  Start on the left, and skip filters that are not of interest.  Once you have selected a set, click the blue button to view or analyze it. 
            ]]>
        </summary>

        <propertyList name="organism">
           <value>H. sapien</value>
        </propertyList>
        <propertyList name="websiteProperties">
          <value>useWizard</value>
          <value>hideOperation</value>
          <value>hideTitle</value>
          <value>hideAttrDescr</value>
        </propertyList>
 
      </question>

        <question name="ParticipantsByRelativeVisits_maled" newBuild="1" includeProjects="Gates"
              searchCategory="Participant"
              displayName="Select a Set of Participants (MAL-ED)"
              shortDisplayName="Particip MAL-ED"
              queryRef="ParticipantId.ParticipantsByCharWizRelVis_maled" 
              recordClassRef="ParticipantRecordClasses.ParticipantRecordClass" >



        <attributesList 
            summary="EUPATH_0000452,demo_plot_allThree_compact,EUPATH_0000741,visit_count"        
        /> 


	<dynamicAttributes>
	     <columnAttribute name="visit_count" displayName="# matching observations" align="center" help="Number of observations matching the search criteria for this participant"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	     <columnAttribute name="ave_age_visit" displayName="Avg age at observation" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	</dynamicAttributes>
          

        <summary>
            <![CDATA[
Use the filters above to select a set of Participants or to explore the data.  Start on the left, and skip filters that are not of interest.  Once you have selected a set, click the blue button to view or analyze it. 
            ]]>
        </summary>

        <propertyList name="organism">
           <value>H. sapien</value>
        </propertyList>
        <propertyList name="websiteProperties">
          <value>useWizard</value>
          <value>hideOperation</value>
          <value>hideTitle</value>
          <value>hideAttrDescr</value>
        </propertyList>

        <propertyList name="relatedObservationsLayoutSettings">
          <value>
            {
              "observationsGroupName": "part_event_characteristics",
              "relatedObservationsGroupName": "relative_events",
              "useRelativeObservationsParamName": "use_relative_visits",
              "dateOperatorParamName": "dateOperator_fv",
              "daysBetweenParamName": "days_between",
              "dateDirectionParamName": "date_direction_fv",
              "numRelativeEventsParamName": "num_relative_events",
              "relativeVisitsParamName": "relative_visits_nf_maled"
            }
          </value>
        </propertyList>
 
      </question>

      <question name="ParticipantsByCaseControlVisits_gems" newBuild="1" includeProjects="Gates,ClinEpiDB"
              searchCategory="Participant"
              displayName="Select a Set of Participants (GEMS)"
              shortDisplayName="Particip GEMS"
              queryRef="ParticipantId.ParticipantsByCaseControl_gems" 
              recordClassRef="DS_841a9f5259ParticipantRecordClasses.DS_841a9f5259ParticipantRecordClass" >


        <attributesList 
            summary="OBI_0001627,EUPATH_0010056,EUPATH_0010368,EUPATH_0010375" 
        /> 


        <summary>
            <![CDATA[
Use the filters above to select a set of Participants or to explore the data.  Start on the left, and skip filters that are not of interest.  Once you have selected a set, click the blue button to view or analyze it. 
            ]]>
        </summary>

        <propertyList name="organism">
           <value>H. sapien</value>
        </propertyList>
        <propertyList name="websiteProperties">
          <value>useWizard</value>
          <value>hideOperation</value>
          <value>hideTitle</value>
          <value>hideAttrDescr</value>
        </propertyList>

<!--
        <propertyList name="relatedObservationsLayoutSettings">
          <value>
            {
              "observationsGroupName": "part_event_characteristics",
              "relatedObservationsGroupName": "relative_events",
              "useRelativeObservationsParamName": "use_relative_visits",
              "dateOperatorParamName": "dateOperator_fv",
              "daysBetweenParamName": "days_between",
              "dateDirectionParamName": "date_direction_fv",
              "numRelativeEventsParamName": "num_relative_events",
              "relativeVisitsParamName": "relative_visits_nf_maled"
            }
          </value>
        </propertyList>
-->
 
      </question>

       <question name="ParticipantsByCaseControlVisitsShort_gems" newBuild="1" includeProjects="ClinEpiDB,Gates"
              searchCategory="Participant"
              displayName="Shorter: Select a Set of Participants (GEMS)"
              shortDisplayName="Particip GEMS"
              queryRef="ParticipantId.ParticipantsByCaseControlShort_gems" 
              recordClassRef="DS_841a9f5259ParticipantRecordClasses.DS_841a9f5259ParticipantRecordClass" >


        <attributesList 
            summary="OBI_0001627,EUPATH_0010056" 
        /> 


        <summary>
            <![CDATA[
Use the filters above to select a set of Participants or to explore the data.  Start on the left, and skip filters that are not of interest.  Once you have selected a set, click the blue button to view or analyze it. 
            ]]>
        </summary>

        <propertyList name="organism">
           <value>H. sapien</value>
        </propertyList>
        <propertyList name="websiteProperties">
          <value>useWizard</value>
          <value>hideOperation</value>
          <value>hideTitle</value>
          <value>hideAttrDescr</value>
        </propertyList>

<!--
        <propertyList name="relatedObservationsLayoutSettings">
          <value>
            {
              "observationsGroupName": "part_event_characteristics",
              "relatedObservationsGroupName": "relative_events",
              "useRelativeObservationsParamName": "use_relative_visits",
              "dateOperatorParamName": "dateOperator_fv",
              "daysBetweenParamName": "days_between",
              "dateDirectionParamName": "date_direction_fv",
              "numRelativeEventsParamName": "num_relative_events",
              "relativeVisitsParamName": "relative_visits_nf_maled"
            }
          </value>
        </propertyList>
-->
 
      </question>

   <question name="ParticipantsByHouseholdId"   newBuild="1"
              displayName="Transform to Participants"
              shortDisplayName="household->participant"
              queryRef="ParticipantId.ParticipantsByHouseholdIds" 
              recordClassRef="DS_0ad509829eParticipantRecordClasses.DS_0ad509829eParticipantRecordClass"
              noSummaryOnSingleRecord="true"
              includeProjects="ICEMR">

	<dynamicAttributes>
	     <columnAttribute name="household" displayName="Household Transformed" help="Household Participant is associated with" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	</dynamicAttributes>

             <summary>
             Find participant by household id.
             </summary>

             <description>
               <![CDATA[
             Find participant by household id.
               ]]>
             </description>
    </question>

      <question name="ParticipantsByClinicalVisit"   newBuild="22"
              displayName="Transform to Participants"
              shortDisplayName="clinicalvisits->participant"
              queryRef="ParticipantId.ParticipantsByClinicalVisits" 
              recordClassRef="DS_0ad509829eParticipantRecordClasses.DS_0ad509829eParticipantRecordClass"
              noSummaryOnSingleRecord="true"
              includeProjects="ICEMR">

<!-- todo
        <attributesList 
            summary="EUPATH_0000452,demo_plot_allThree_compact,EUPATH_0000741,num_of_visits"        
            sorting="num_of_visits desc"
        /> 
-->
	<dynamicAttributes>
	     <columnAttribute name="num_of_visits" displayName="Observations Transformed" help="Observations associated with the participant from the previous step" align="center"> 
              <plugin name="histogram" display="Histogram"
                      description="Display a histogram of the values"
                      implementation="org.gusdb.wdk.model.record.attribute.plugin.HistogramAttributePlugin"
                      view="/wdk/jsp/results/histogram.jsp" />
            </columnAttribute>
	</dynamicAttributes>

             <summary>
             Find participants by by clinical observations.
             </summary>

             <description>
               <![CDATA[
             Find participants by clinical observations.
               ]]>
             </description>
    </question>


   <question name="ParticipantsBySourceID" newBuild="22"
	     displayName="Participant ID"
	     shortDisplayName="Participant ID"
	     queryRef="ParticipantId.ParticipantsBySourceID" 
             recordClassRef="DS_0ad509829eParticipantRecordClasses.DS_0ad509829eParticipantRecordClass"
             noSummaryOnSingleRecord="false"
             includeProjects="ICEMR">


        <attributesList 
            summary="source_id"   
            sorting="source_id desc"
        /> 
             <summary>
             Find participant by source id.
             </summary>

             <description>
               <![CDATA[
             Find participant by source id.
               ]]>
             </description>
    </question>


  </questionSet>
</wdkModel>
